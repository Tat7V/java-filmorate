# java-filmorate
Template repository for Filmorate project.
![schema.png](schema.png)
## üìù –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ö–µ–º—ã
**–û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏:**

    –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (users) - —Ö—Ä–∞–Ω—è—Ç –ø—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

    –§–∏–ª—å–º—ã (films) - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–∞—Ö

    –†–µ–π—Ç–∏–Ω–≥–∏ MPA (mpa_ratings) - –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (G, PG, PG-13 –∏ —Ç.–¥.)

    –ñ–∞–Ω—Ä—ã (genres) - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ñ–∏–ª—å–º–æ–≤ (–∫–æ–º–µ–¥–∏—è, –¥—Ä–∞–º–∞ –∏ –¥—Ä.)

    –õ–∞–π–∫–∏ (likes) - –æ—Ç–º–µ—Ç–∫–∏ "–Ω—Ä–∞–≤–∏—Ç—Å—è" –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

    –î—Ä—É–∂–µ—Å–∫–∏–µ —Å–≤—è–∑–∏ (friendships) - –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

    –°—Ç–∞—Ç—É—Å—ã –¥—Ä—É–∂–±—ã (friendship_status) - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–∞—è/–Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–∞—è –¥—Ä—É–∂–±–∞

### üîç –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
**–î—Ä—É–∂–±–∞** —Ç—Ä–µ–±—É–µ—Ç –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (—Å—Ç–∞—Ç—É—Å `CONFIRMED`)  
–í —Ç–∞–±–ª–∏—Ü–µ friendships –æ–±–∞ –ø–æ–ª—è (user_id –∏ friend_id) —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—å—é —Å–æ—Å—Ç–∞–≤–Ω–æ–≥–æ –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞, –∫–æ—Ç–æ—Ä—ã–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∫–∞–∂–¥–∞—è –¥—Ä—É–∂–µ—Å–∫–∞—è —Å–≤—è–∑—å –±—É–¥–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ–π –≤ —Å–∏—Å—Ç–µ–º–µ.  
–ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è —Å —Ç–∞–±–ª–∏—Ü–µ–π film_genres (—Å–≤—è–∑—å —Ñ–∏–ª—å–º–æ–≤ –∏ –∂–∞–Ω—Ä–æ–≤) –∏ likes (–ª–∞–π–∫–∞–º–∏).  
–ù–∞–ª–∏—á–∏–µ —Å–æ—Å—Ç–∞–≤–Ω–æ–≥–æ –∫–ª—é—á–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:  
- —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å —Å–æ—á–µ—Ç–∞–Ω–∏–π  
- –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ –ø–∞—Ä–∞–º –∑–Ω–∞—á–µ–Ω–∏–π

## üõ† –ü—Ä–∏–º–µ—Ä—ã SQL-–∑–∞–ø—Ä–æ—Å–æ–≤

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

INSERT INTO users (email, login, name, birthday)
VALUES ('user@example.com', 'user_login', 'User Name', '1990-01-01');

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

SELECT * FROM users;

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ñ–∏–ª—å–º–∞:

INSERT INTO films (name, description, release_date, duration, mpa_id)
VALUES ('Inception', 'A thief who steals corporate secrets', '2010-07-16', 148, 3);

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–ø-10 –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤:

SELECT f.*, COUNT(l.user_id) AS likes_count
FROM films f
LEFT JOIN likes l ON f.film_id = l.film_id
GROUP BY f.film_id
ORDER BY likes_count DESC
LIMIT 10;

### –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±—â–∏—Ö –¥—Ä—É–∑–µ–π

SELECT u.*
FROM friendships f1
JOIN friendships f2 ON f1.friend_id = f2.friend_id
JOIN users u ON f1.friend_id = u.user_id
WHERE f1.user_id = 1 AND f2.user_id = 2 AND f1.status_id = 2 AND f2.status_id = 2;